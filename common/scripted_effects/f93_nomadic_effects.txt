#Effect to create a nomad Empire.
# ROOT = origin country
# Last_created_country = new country
create_nomad_country_effect = {
	#Prepwork
	capital_scope = {
		save_global_event_target_as = homeworld
	}
	#Create Nomadic Nation
	create_country = {
		name = ROOT
		adjective = ROOT
	#	contact_rule = default
		type = ROOT
		name_list = ROOT
		ship_prefix = ""
		authority = ROOT
		origin = origin_nomadic_empire
		civics = ROOT
		species = ROOT
		flag = ROOT
		ethos = ROOT
		ignore_initial_colony_error = yes
		auto_delete = no
		effect = {
			give_technology = { tech = tech_nomatic_society }
			country_event = { id = f93_nomadic_start.3 }
			create_ship_design = { design = NAME_Nomadic_shipyard }
			add_ship_design = last_created_design
			create_ship_design = { design =  NAME_Nomadic_freighter_mins }
			add_ship_design = last_created_design
			create_ship_design = { design =  NAME_Nomadic_freighter_gen	 }
			add_ship_design = last_created_design
			create_ship_design = { design =  NAME_Nomadic_freighter_aloy }
			add_ship_design = last_created_design
			create_ship_design = { design =  NAME_Nomadic_freighter_science }
			add_ship_design = last_created_design
			establish_communications_no_message = ROOT
			unlock_council_slots = 3
			every_playable_country = { country_event = { id = f93_nomadic_start.4 } }
		}
	}
	#Create Assets
	# every_controlled_fleet = {
	# 	limit = {
	# 		is_ship_class = shipclass_starbase
	# 	}
	# 	destroy_fleet = this
	# }

	every_owned_leader = {
		set_owner = last_created_country
	}
	every_owned_fleet = {
		limit = {
			NOR = {
				is_ship_class = shipclass_starbase 
				is_ship_class = shipclass_mining_station
				is_ship_class = shipclass_research_station
			}
		}
		set_owner = last_created_country
	}
	while = {
		count = 2
		create_leader = {
			name = random
			species = ROOT
			class = official
		}
		create_leader = {
			name = random
			species = ROOT
			class = commander
		}
		create_leader = {
			name = random
			species = ROOT
			class = scientist
		}
	}
	#Turn pops into Rescources 
	last_created_country = {
		start_situation = { type = nomadic_recruitment_leaders target = last_created_country }
		start_situation = { type = nomadic_recruitment_troops target = last_created_country }
		add_resource = {
			energy = 250
			minerals = 400
			consumer_goods = 100
			alloys = 250
			influence = 100
			unity = 50
		}
		if = { limit = { is_machine_empire = no }
			add_resource = {
				food = 250
			}
		}
		if = { limit = { is_machine_empire = yes }
			add_resource = {
				energy = 250
			}
		}
		if = { limit = { has_civic = civic_nomadic_pirate } start_situation = { type = begin_nomadic_raid_on_territory target = last_created_country } }
		set_player = ROOT
	}
	
	#Remove colonies
	# every_owned_planet = {
	# 	destroy_colony = yes
	# }
}

save_rescources_effect = {
	export_resource_stockpile_to_variable = { resource = energy variable = stockpile_energy }
	export_resource_stockpile_to_variable = { resource = minerals variable = stockpile_minerals }
	export_resource_stockpile_to_variable = { resource = food variable = stockpile_food }
	export_resource_stockpile_to_variable = { resource = alloys variable = stockpile_alloys }
	export_resource_stockpile_to_variable = { resource = consumer_goods variable = stockpile_consumer_goods }
	export_resource_stockpile_to_variable = { resource = influence variable = stockpile_consumer_influence }
	export_resource_stockpile_to_variable = { resource = exotic_gases variable = stockpile_exotic_gases }
	export_resource_stockpile_to_variable = { resource = rare_crystals variable = stockpile_rare_crystals }
	export_resource_stockpile_to_variable = { resource = volatile_motes variable = stockpile_volatile_motes }
	export_resource_stockpile_to_variable = { resource = sr_zro variable = stockpile_sr_zro }
	export_resource_stockpile_to_variable = { resource = sr_dark_matter variable = stockpile_sr_dark_matter }
	export_resource_stockpile_to_variable = { resource = sr_living_metal variable = stockpile_sr_living_metal }
	export_resource_stockpile_to_variable = { resource = unity variable = stockpile_unity }
	export_resource_stockpile_to_variable = { resource = physics_research variable = stockpile_physics_research }
	export_resource_stockpile_to_variable = { resource = society_research variable = stockpile_society_research }
	export_resource_stockpile_to_variable = { resource = engineering_research variable = stockpile_engineering_research }
}

reinstate_rescources_effect = {
	add_resource = {
		energy = 1
		mult = stockpile_energy
	}
	add_resource = {
		minerals = 1
		mult = stockpile_minerals
	}
	add_resource = {
		food = 1
		mult = stockpile_food
	}
	add_resource = {
		alloys = 1
		mult = stockpile_alloys
	}
	add_resource = {
		consumer_goods = 1
		mult = stockpile_consumer_goods
	}
	add_resource = {
		influence = 1
		mult = stockpile_consumer_influence
	}
	add_resource = {
		exotic_gases = 1
		mult = stockpile_exotic_gases
	}
	add_resource = {
		rare_crystals = 1
		mult = stockpile_rare_crystals
	}
	add_resource = {
		volatile_motes = 1
		mult = stockpile_volatile_motes
	}
	add_resource = {
		sr_zro = 1
		mult = stockpile_sr_zro
	}
	add_resource = {
		sr_dark_matter = 1
		mult = stockpile_sr_dark_matter
	}
	add_resource = {
		sr_living_metal = 1
		mult = stockpile_sr_living_metal
	}
	add_resource = {
		unity = 1
		mult = stockpile_unity
	}
	add_resource = {
		physics_research = 1
		mult = stockpile_physics_research
	}
	add_resource = {
		society_research = 1
		mult = stockpile_society_research
	}
	add_resource = {
		engineering_research = 1
		mult = stockpile_engineering_research
	}
}

#Effect to create a nomad Empire.
# ROOT = nomadic country
# Last_created_country = old country
create_nomad_country_effect = {
	save_global_event_target_as = homeworld_leavers
	capital_scope = {
		save_global_event_target_as = homeworld
	}
	#Create Nomadic Nation
	give_technology = { tech = tech_nomatic_society message = no }
	set_country_type = playable_nomads
	set_origin = origin_nomadic_empire
	create_ship_design = { design = NAME_Nomadic_shipyard }
	add_ship_design = last_created_design
	create_ship_design = { design =  NAME_Nomadic_freighter_mins }
	add_ship_design = last_created_design
	create_ship_design = { design =  NAME_Nomadic_freighter_gen	 }
	add_ship_design = last_created_design
	create_ship_design = { design =  NAME_Nomadic_freighter_aloy }
	add_ship_design = last_created_design
	create_ship_design = { design =  NAME_Nomadic_freighter_science }
	add_ship_design = last_created_design
	capital_scope = {
		destroy_colony = yes
	}
	#Populate old Planet again
	event_target:homeworld = {
		create_country = {
			name = ROOT
			adjective = ROOT
		#	contact_rule = default
			type = ROOT
			name_list = ROOT
			ship_prefix = ""
			authority = ROOT
			origin = origin_default
			civics = random
			species = ROOT
			flag = random
			ethos = ROOT
			effect = {
				add_resource = {
					energy = 250
					minerals = 400
					consumer_goods = 100
					alloys = 250
					influence = 100
					unity = 500
				}
				country_event = { id = game_start.72 }
				country_event = { id = game_start.70 }
				capital_scope = {
					while = {
						count = 28
						create_pop = {
							species = root
							ethos = random
						}
					}
				}
			}
		}
	}
	
	establish_communications_no_message = last_created_country
	every_owned_fleet = {
		limit = {
			OR = {
				is_ship_class = shipclass_starbase 
				is_ship_class = shipclass_mining_station
				is_ship_class = shipclass_research_station
			}
		}
		set_owner = last_created_country
	}
	#adjust rescources and situations
	
		start_situation = { type = nomadic_recruitment_leaders target = ROOT }
		start_situation = { type = nomadic_recruitment_troops target = ROOT }
		if = { limit = { has_civic = civic_nomadic_pirate } start_situation = { type = begin_nomadic_raid_on_territory target = ROOT } }
		add_resource = {
			energy = 250
			minerals = 400
			consumer_goods = 100
			alloys = 250
			influence = 100
			unity = 50
		}
		if = { limit = { is_machine_empire = no }
			add_resource = {
				food = 250
			}
		}
		if = { limit = { is_machine_empire = yes }
			add_resource = {
				energy = 250
			}
		}
		
	country_event = { id = f93_nomadic_start.3 }
	
}

save_rescources_effect = {
	export_resource_stockpile_to_variable = { resource = energy variable = stockpile_energy }
	export_resource_stockpile_to_variable = { resource = minerals variable = stockpile_minerals }
	export_resource_stockpile_to_variable = { resource = food variable = stockpile_food }
	export_resource_stockpile_to_variable = { resource = alloys variable = stockpile_alloys }
	export_resource_stockpile_to_variable = { resource = consumer_goods variable = stockpile_consumer_goods }
	export_resource_stockpile_to_variable = { resource = influence variable = stockpile_consumer_influence }
	export_resource_stockpile_to_variable = { resource = exotic_gases variable = stockpile_exotic_gases }
	export_resource_stockpile_to_variable = { resource = rare_crystals variable = stockpile_rare_crystals }
	export_resource_stockpile_to_variable = { resource = volatile_motes variable = stockpile_volatile_motes }
	export_resource_stockpile_to_variable = { resource = sr_zro variable = stockpile_sr_zro }
	export_resource_stockpile_to_variable = { resource = sr_dark_matter variable = stockpile_sr_dark_matter }
	export_resource_stockpile_to_variable = { resource = sr_living_metal variable = stockpile_sr_living_metal }
	export_resource_stockpile_to_variable = { resource = unity variable = stockpile_unity }
	export_resource_stockpile_to_variable = { resource = physics_research variable = stockpile_physics_research }
	export_resource_stockpile_to_variable = { resource = society_research variable = stockpile_society_research }
	export_resource_stockpile_to_variable = { resource = engineering_research variable = stockpile_engineering_research }
}

reinstate_rescources_effect = {
	add_resource = {
		energy = 1
		mult = stockpile_energy
	}
	add_resource = {
		minerals = 1
		mult = stockpile_minerals
	}
	add_resource = {
		food = 1
		mult = stockpile_food
	}
	add_resource = {
		alloys = 1
		mult = stockpile_alloys
	}
	add_resource = {
		consumer_goods = 1
		mult = stockpile_consumer_goods
	}
	add_resource = {
		influence = 1
		mult = stockpile_consumer_influence
	}
	add_resource = {
		exotic_gases = 1
		mult = stockpile_exotic_gases
	}
	add_resource = {
		rare_crystals = 1
		mult = stockpile_rare_crystals
	}
	add_resource = {
		volatile_motes = 1
		mult = stockpile_volatile_motes
	}
	add_resource = {
		sr_zro = 1
		mult = stockpile_sr_zro
	}
	add_resource = {
		sr_dark_matter = 1
		mult = stockpile_sr_dark_matter
	}
	add_resource = {
		sr_living_metal = 1
		mult = stockpile_sr_living_metal
	}
	add_resource = {
		unity = 1
		mult = stockpile_unity
	}
	add_resource = {
		physics_research = 1
		mult = stockpile_physics_research
	}
	add_resource = {
		society_research = 1
		mult = stockpile_society_research
	}
	add_resource = {
		engineering_research = 1
		mult = stockpile_engineering_research
	}
}

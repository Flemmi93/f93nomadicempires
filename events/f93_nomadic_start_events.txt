namespace = f93_nomadic_start

country_event = {
	id = f93_nomadic_start.1
	is_triggered_only = yes
	title = f93_nomadic_start.1.name
	desc = f93_nomadic_start.1.desc
	picture	= GFX_evt_hangar_bay
	show_sound = event_ship_bridge
	
	trigger = {
		is_ai = no
		is_f93_nomadic = no
		is_space_steppe_nomad = no
		is_rush_space_steppe_nomad = no
		is_slow_space_steppe_nomad = no
	}
	
	option = {
		name = f93_nomadic_start.1.b
		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = f93_nomadic_start.1.a
		
		hidden_effect = {
			f93_create_nomad_country_effect = yes
		}
	}

	option = {
		name = f93_nomadic_start.1.c
		hidden_effect = {
			f93_create_nomad_country_effect = yes
			last_created_country = {
				add_resource = { unity = 500 }
				country_event = { id = f93_nomadic_start.8 }
				set_government_cooldown = 0
			}
		}
	}
}

country_event = {
	id = f93_nomadic_start.2
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		is_f93_nomadic = yes
		is_ai = no
	}

	immediate = {
		f93_create_nomad_country_effect = yes
	}
}

country_event = {
	id = f93_nomadic_start.3
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		create_fleet = {
			name = "Mothership"
			effect = {
				set_owner = event_target:homeworld_leavers
				set_location = event_target:homeworld
				create_ship = {
					name = "Mothership"
					design = NAME_Nomadic_mothership
				}
			}
		}
		create_fleet = {
			name = "Nomadic Fleet"
			effect = {
				set_owner = event_target:homeworld_leavers
				set_location = event_target:homeworld
				create_ship = {
					name = random
					random_existing_design = constructor
				}
			}
		}
				
		create_fleet = {
			name = "Nomadic Fleet"
			effect = {
				set_owner = event_target:homeworld_leavers
				set_location = event_target:homeworld
				create_ship = {
					name = random
					random_existing_design = science
				}
			}
		}
			
		create_fleet = {
			name = "Combat Fleet"
			effect = {
				set_owner = event_target:homeworld_leavers
				set_location = event_target:homeworld
				while = {
					count = 8
					create_ship = {
						name = random
						random_existing_design = corvette
					}
				}
			}
		}
		create_fleet = {
			name = "Nomadic Fleet"
			effect = {
				set_owner = event_target:homeworld_leavers
				set_location = event_target:homeworld
				create_ship = {
					name = NAME_Nomadic_freighter_mins
					design = NAME_Nomadic_freighter_mins
				}
				create_ship = {
					name = NAME_Nomadic_freighter_mins
					design = NAME_Nomadic_freighter_mins
				}
				create_ship = {
					name = NAME_Nomadic_freighter_gen
					design = NAME_Nomadic_freighter_gen
				}
				create_ship = {
					name = NAME_Nomadic_freighter_aloy
					design = NAME_Nomadic_freighter_aloy
				}
				create_ship = {
					name = NAME_Nomadic_freighter_aloy
					design = NAME_Nomadic_freighter_aloy
				}
				create_ship = {
					name = NAME_Nomadic_freighter_aloy
					design = NAME_Nomadic_freighter_csg
				}
				create_ship = {
					name = NAME_Nomadic_freighter_science
					design = NAME_Nomadic_freighter_science
				}
			}
		}
		clear_global_event_target = homeworld
		clear_global_event_target = homeworld_leavers
		
	}
}

country_event = {
	id = f93_nomadic_start.4
	is_triggered_only = yes
	hide_window = yes
	trigger = { is_f93_nomadic = yes }
	immediate = {
		every_country = {
			limit = {
				is_country_type = default
				is_f93_nomadic = no
				has_communications = root
			}
			set_closed_borders = {
				who = root
				status = no
				forced = 999
			}
		}
	}
}
country_event = {
	id = f93_nomadic_start.5
	is_triggered_only = yes
	hide_window = yes
	trigger = { has_civic = civic_nomadic_pirate }
	immediate = {
		if = {
			limit = { is_country_type = playable_pirate_nomads }
			f93_save_resources_effect = yes
			set_country_type = playable_nomads
			f93_reinstate_resources_effect = yes
		}
		if = {
			limit = { is_country_type = default }
			set_faction_hostility = { target = every_playable_country set_hostile = no set_neutral = no set_friendly = no }
		}
		every_country = {
			limit = { has_country_flag = was_raieded_by_@root }
			add_resource = { energy = 500 }
			root = {
				add_resource = { energy = 500 }
			}
			remove_country_flag = was_raieded_by_@root
		}
	}
}

country_event = {
	id = f93_nomadic_start.6
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		days_passed > 29
		has_civic = civic_nomadic_pirate
		NOT = {	has_country_flag = has_Access_to_raiding }
	}
	immediate = {
		start_situation = { type = begin_nomadic_raid_on_territory target = owner }
	}
}
country_event = {
	id = f93_nomadic_start.7
	is_triggered_only = yes
	hide_window = yes
	trigger = { has_civic = civic_nomadic_pirate }
	immediate = {
		if = {
			limit = { is_country_type = playable_nomads }
			f93_save_resources_effect = yes
			set_country_type = playable_pirate_nomads
			f93_reinstate_resources_effect = yes
		}
		if = {
			limit = { is_country_type = default }
			set_faction_hostility = { target = every_playable_country set_hostile = yes set_neutral = no set_friendly = no }
		}
	}
}

country_event = {
	id = f93_nomadic_start.8
	
	is_triggered_only = yes
	title = f93_nomadic_start.8.name
	desc = f93_nomadic_start.8.desc
	picture	= GFX_evt_ship_in_orbit

	option = {
		name = OK
	}
}

country_event = {
	id = f93_nomadic_start.9
	fire_only_once = yes
	mean_time_to_happen = { days = 1 }
	title = f93_nomadic_start.9.name
	desc = f93_nomadic_start.9.desc
	picture	= GFX_evt_ship_in_orbit
	trigger = {
		or = {
			is_country_type = playable_nomads
			is_country_type = playable_pirate_nomads
		}
	}
	option = {
		name = OK
		hidden_effect = { turn_empire_into_nomads_midgame = yes }
	}

	option = {
		name = NO
	}
}

country_event = {
	id = f93_nomadic_start.10
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		turn_empire_into_nomads_midgame = yes
	}
}

country_event = { #event to update save files if need be. last implemente 17.05.2024
	id = f93_nomadic_start.12
	is_triggered_only = yes
	hide_window = yes
	trigger = { is_f93_nomadic = yes NOT = { has_country_flag = has_f93_space_economy_flag } }
	immediate = {
		set_country_flag = has_f93_space_economy_flag
		create_ship_design = { design =  NAME_Nomadic_mothership }
		add_ship_design = last_created_design
	}
}

country_event = {
	id = f93_nomadic_start.11
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		create_leader = {
			name = random
			species = owner_main_species
			class = commander
			skill = 1
		}
		create_leader = {
			name = random
			species = owner_main_species
			class = scientist
			skill = 1
		}
	}
}

country_event = {
	id = f93_nomadic_start.13
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		save_event_target_as = homeworld_leavers
		home_planet = {
			save_event_target_as = homeworld
		}
		create_ship_design = { design =  NAME_Nomadic_freighter_science }
		add_ship_design = last_created_design
		create_fleet = {
			name = "Mothership"
			effect = {
				set_owner = event_target:homeworld_leavers
				set_location = event_target:homeworld
				create_ship = {
					name = NAME_Nomadic_shipyard
					design = NAME_Nomadic_mothership
				}
			}
		}
	}
}

country_event = {
	id = f93_nomadic_start.14
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		any_owned_ship = {
			is_ship_size = nomadic_mothership
		}
	}
	immediate = {
		add_modifier = { modifier = f93_has_a_mothership_modifier days = 30 }
	}
}